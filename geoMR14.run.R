######Video source: https://ke.biowolf.cn
######??????ѧ??: https://www.biowolf.cn/
######΢?Ź??ںţ?biowolf_cn
######???????䣺biowolf@foxmail.com
######????΢??: 18520221056

#install.packages('e1071')

#if (!requireNamespace("BiocManager", quietly = TRUE))
#    install.packages("BiocManager")
#BiocManager::install("preprocessCore")


inputFile="normalize.txt"      #?????????ļ?
refFile="humanREF.txt"         #?ο??ļ?
setwd("E:\\桌面\\177geoMR\\14.CIBERSORT")      #???ù???Ŀ¼
source("geoMR14.CIBERSORT.R")       #???ð?

#????ϸ??????????
outTab=CIBERSORT(refFile, inputFile, perm=1000)

#?????߽??????????ˣ????ұ???????ϸ???????Ľ???
outTab=outTab[outTab[,"P-value"]<0.05,]
outTab=as.matrix(outTab[,1:(ncol(outTab)-3)])
outTab=rbind(id=colnames(outTab),outTab)
write.table(outTab, file="CIBERSORT-Results.txt", sep="\t", quote=F, col.names=F)


######Video source: https://ke.biowolf.cn
######??????ѧ??: https://www.biowolf.cn/
######΢?Ź??ںţ?biowolf_cn
######???????䣺biowolf@foxmail.com
######????΢??: 18520221056

